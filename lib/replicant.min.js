(function(a){var b,c;b=function(a,b){return a===""?b:""+a+"."+b},c=function(a,b,c,d){var e,f;return f=_(a).isObject(),e=_(a).isArray(),f||e?e?b():c():d()};var d;d=function(a,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v;return t=this,v=a,q={},p=h||"",o=function(){},t.name="ArrayProxy",l=i||o,s=j||o,k=function(a,b,c){return Object.defineProperty(t,a,{get:function(){return b[c]},set:function(a){return b[c]=a},configurable:!0}),l(a,b,c)},r=function(a){return delete t[a],s(a)},n=function(a,b){return console.log("Got "+a),f(a,b)},u=function(a,b,c){return console.log("Set "+a),g(a,b,c)},m=function(a,h){var i,j;return j=v[h],i=b(p,h),l(i,a[h]),a[h]=c(j,function(){return new d(j,f,g,i,k,r)},function(){return new e(j,f,g,i,k,r)},function(){return j}),Object.defineProperty(t,h,{get:function(){var b;return b=a[h],n(i,b),b},set:function(b){var c;return c=a[h],a[h]=b,v[h]=b,u(i,b,c)},configurable:!0,enumerable:!0})},this.push=function(a){var c,d;return console.log(""+a+" was pushed"),d=v.length,v.push(a),console.log("Creating proxy for "+d),m(q,d),c=b(p,d),u(c,a,void 0)},this.unshift=function(a){var c,d;return v.push(a),d=v.length-1,m(q,d),c=b(p,d),u(c,a,v[1])},this.pop=function(){var a,c,d;return d=v.pop(),c=v.length-1,a=b(p,c),u(a,void 0,d),delete t[v.length],d},this.shift=function(){var a,c;return c=v.shift(),a=b(p,"0"),u(0,void 0,c),delete t[v.length],c},_(a).chain().keys().each(function(a){return m(q,a)}),t};var e;e=function(a,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return y=this,q=[],r=[],v={},u=h||"",t=function(){},l=i||t,x=j||t,p=function(){var a;return a=q,q=[],a},s=function(){var a;return a=r,r=[],a},y.name="ObjectProxy",k=function(a,b,c){return Object.defineProperty(y,a,{get:function(){return b[c]},set:function(a){return b[c]=a},configurable:!0}),l(a,b,c)},w=function(a){return delete y[a],x(a)},o=function(a,b){return console.log("Got "+a+" of "+typeof b),f(a,b),q.push(a)},z=function(a,b,c){return console.log("Set "+a),g(a,b,c),r.push(a)},n=function(b,h,i,j,l){var m;m=a[l];if(b||i[l]===void 0)i[l]=c(m,function(){return new d(m,f,g,j,k,w)},function(){return new e(m,f,g,j,k,w)},function(){return m});return i[l]},m=function(c,d,e){var f;return f=b(u,e),k(f,c,e),Object.defineProperty(c,e,{get:function(){var a;return a=n(!1,c,d,f,e),o(f,a),a},set:function(b){var g,h;return h=d[e],a[e]=b,g=n(!0,c,d,f,e),z(f,g,h)},configurable:!0,enumerable:!0})},_(a).chain().keys().each(function(a){return m(y,v,a)}),y};var f;f={"default":{onGet:function(a,b){return console.log("read: "+a+" -> "+b)},onSet:function(a,b,c){return console.log("wrote: "+a+". "+c+" -> "+b)},namespace:""},create:function(a,b,f,g){var h,i;return h=b||(b=this["default"].onGet),i=f||(f=this["default"].onSet),g=g||(g=this["default"].namespace),c(a,function(){return new d(a,h,i,g)},function(){return new e(a,h,i,g)},function(){return a})}},a.replicant=f})(window)