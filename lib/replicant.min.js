(function(a){var b,c;b=function(a,b){return a===""?b:""+a+"."+b},c=function(a,b,c,d){var e,f;return f=_(a).isObject(),e=_(a).isArray(),f||e?e?b():c():d()};var d;d=function(a,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w;return u=this,w=a,r={},q=h||"",p=function(){},u.name="ArrayProxy",l=i||p,t=j||p,k=function(a,b,c){return Object.defineProperty(u,a,{get:function(){return b[c]},set:function(a){return b[c]=a},configurable:!0}),l(a,b,c)},s=function(a){return delete u[a],t(a)},o=function(a,b){return f(a,b)},v=function(a,b,c){return g(a,b,c)},n=function(a,b,h){var i;i=w[h];if(a||r[h]===void 0)r[h]=c(i,function(){return new d(i,f,g,b,k,s)},function(){return new e(i,f,g,b,k,s)},function(){return i});return r[h]},m=function(a){var c;return c=b(q,a),l(c,r[a]),n(!1,c,a),Object.defineProperty(u,a,{get:function(){var b;return b=n(!1,c,a),o(c,b),b},set:function(b){var d,e;return e=r[a],w[a]=b,d=n(!0,c,a),v(c,d,e)},configurable:!0,enumerable:!0})},Object.defineProperty(u,"length",{get:function(){return w.length}}),this.push=function(a){var c,d;return d=w.length,w.push(a),m(d),c=b(q,d),v(c,a,void 0)},this.unshift=function(a){var c,d;return d=w.length,w.push(a),m(r,d),c=b(q,d),v(c,a,w[1])},this.pop=function(){var a,c,d;return d=w.pop(),c=w.length-1,a=b(q,c),v(a,void 0,d),delete u[w.length],d},this.shift=function(){var a,c;return c=w.shift(),a=b(q,"0"),v(0,void 0,c),delete u[w.length],c},_(a).chain().keys().each(function(a){return m(a)}),u};var e;e=function(a,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return y=this,q=[],r=[],v={},u=h||"",t=function(){},l=i||t,x=j||t,p=function(){var a;return a=q,q=[],a},s=function(){var a;return a=r,r=[],a},y.name="ObjectProxy",k=function(a,b,c){return Object.defineProperty(y,a,{get:function(){return b[c]},set:function(a){return b[c]=a},configurable:!0}),l(a,b,c)},w=function(a){return delete y[a],x(a)},o=function(a,b){return f(a,b),q.push(a)},z=function(a,b,c){return g(a,b,c),r.push(a)},n=function(b,h,i){var j;j=a[i];if(b||v[i]===void 0)v[i]=c(j,function(){return new d(j,f,g,h,k,w)},function(){return new e(j,f,g,h,k,w)},function(){return j});return v[i]},m=function(c,d,e){var f;return f=b(u,e),l(f,c,e),n(!1,f,e),Object.defineProperty(c,e,{get:function(){var a;return a=n(!1,f,e),o(f,a),a},set:function(b){var c,g;return g=d[e],a[e]=b,c=n(!0,f,e),z(f,c,g)},configurable:!0,enumerable:!0})},_(a).chain().keys().each(function(a){return m(y,v,a)}),y};var f,g,h,i,j,k,l,m=Object.prototype.hasOwnProperty,n=function(a,b){function d(){this.constructor=a}for(var c in b)m.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};g=function(){function c(a,b){var c,d;this.namespace=b,c=this,d=this.namespace,this.element=a,c.crawl("",this.element,function(a,b,e){var f,g;return this.namespace=a,g=d+".",f=this.namespace===d?this.namespace:this.namespace.replace(g,"","gi"),c[f]=l(e,f)})}var a;return a=function(a,b){return typeof a!="undefined"?a:b},c.prototype.crawl=function(c,d,e){var f,g;g=a(d.id,""),f=b(c,g),e(f,g,d);if(d.children!==void 0&&d.children.length>0)return _(d.children).chain().each(function(a){return crawl(f,a,e)})},c}(),f=function(){function a(){a.__super__.constructor.apply(this,arguments)}return n(a,g),a.prototype.write=function(a,c){var d;return a===this.namespace?_.isObject(c)?self.crawl("",c,function(a,c,d){return this.namespace=a,self.write(b(this.namespace,c),d)}):$(this.element).text(c):(d=self[a],d.write(a,c))},a}(),j=function(){function a(){a.__super__.constructor.apply(this,arguments)}return n(a,g),a.prototype.write=function(a,b){var c;return a===this.namespace?$(this.element).text(b):(c=self[a],c.write(a,b))},a}(),h=function(){function a(){a.__super__.constructor.apply(this,arguments)}return n(a,g),a.prototype.write=function(a,b){var c;return a===this.namespace?$(this.element).val(b):(c=self[a],c.write(a,b))},a}(),k=function(){function a(){a.__super__.constructor.apply(this,arguments)}return n(a,g),a.prototype.write=function(a,b){var c,d,e,f;if(a!==this.namespace)return f=self[a],f.write(a,b);c=$(this.element).children("li");if(c.length<b.length)return e=c[0],d=0,_(b).each(function(a){var b;return b=$(e).clone().attr("id",d).appendTo(element),self[fqn+"."+d]=b[0],d++})},a}(),i=function(){function a(){a.__super__.constructor.apply(this,arguments)}return n(a,g),a.prototype.write=function(a,b){if(a===this.namespace)return $(this.element).text(b)},a}(),l=function(a,b){var c;return this.div=function(a,b){return new f(a,b)},this.span=function(a,b){return new j(a,b)},this.input=function(a,b){return new h(a,b)},this.ul=function(a,b){return new k(a,b)},this.li=function(a,b){return new i(a,b)},_.isString(a)?(c=$(a)[0],this[c.tagName.toLowerCase()](c,b)):this[a[0].tagName.toLowerCase()](a,b)};var o;o={"default":{onGet:function(a,b){return console.log("read: "+a+" -> "+b)},onSet:function(a,b,c){return console.log("wrote: "+a+". "+c+" -> "+b)},namespace:""},create:function(a,b,f,g){var h,i;return h=b||(b=this["default"].onGet),i=f||(f=this["default"].onSet),g=g||(g=this["default"].namespace),c(a,function(){return new d(a,h,i,g)},function(){return new e(a,h,i,g)},function(){return a})},scan:function(a,b){return l(a,b)}},a.replicant=o})(window)